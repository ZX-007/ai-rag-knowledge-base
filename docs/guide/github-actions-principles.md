# GitHub Actions å·¥ä½œåŸç†è¯¦è§£

## ğŸ“š ç›®å½•
1. [æ•´ä½“æ¶æ„](#æ•´ä½“æ¶æ„)
2. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
3. [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
4. [Runner è¿è¡Œæœºåˆ¶](#runner-è¿è¡Œæœºåˆ¶)
5. [äº‹ä»¶è§¦å‘æœºåˆ¶](#äº‹ä»¶è§¦å‘æœºåˆ¶)
6. [å®‰å…¨æœºåˆ¶](#å®‰å…¨æœºåˆ¶)
7. [ç¼“å­˜æœºåˆ¶](#ç¼“å­˜æœºåˆ¶)

---

## æ•´ä½“æ¶æ„

GitHub Actions é‡‡ç”¨**äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼Œä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub å¹³å°                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä»“åº“äº‹ä»¶    â”‚â”€â”€â”€â–¶â”‚ Workflow å¼•æ“ â”‚â”€â”€â–¶â”‚ Job é˜Ÿåˆ—    â”‚  â”‚
â”‚  â”‚  (Push/PR)  â”‚    â”‚  (è°ƒåº¦å™¨)     â”‚    â”‚            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                              â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚         Runner æ±               â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                        â”‚  â”‚ Runner 1 â”‚  â”‚ Runner 2 â”‚    â”‚
                        â”‚  â”‚ (Ubuntu) â”‚  â”‚ (Windows)â”‚    â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                        â”‚  â”‚ Runner 3 â”‚  â”‚ Runner N â”‚    â”‚
                        â”‚  â”‚ (macOS)  â”‚  â”‚  (Self)  â”‚    â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç»„ä»¶

### 1. **Workflow å¼•æ“**
- **èŒè´£**: è§£æ YAML é…ç½®æ–‡ä»¶ï¼Œç®¡ç†å·¥ä½œæµç”Ÿå‘½å‘¨æœŸ
- **åŠŸèƒ½**:
  - ç›‘å¬ä»“åº“äº‹ä»¶
  - è§£æ `.github/workflows/*.yml` æ–‡ä»¶
  - æ ¹æ®è§¦å‘æ¡ä»¶å†³å®šæ˜¯å¦æ‰§è¡Œ
  - åˆ›å»º Job å¹¶åˆ†é…åˆ° Runner

**YAML è§£æç¤ºä¾‹**:
```yaml
on: push  # å¼•æ“ç›‘å¬è¿™ä¸ªäº‹ä»¶
jobs:
  build:  # å¼•æ“åˆ›å»ºè¿™ä¸ª Job
    runs-on: ubuntu-latest  # å¼•æ“åˆ†é… Runner ç±»å‹
    steps:  # å¼•æ“æŒ‰é¡ºåºæ‰§è¡Œæ­¥éª¤
      - run: echo "Hello"
```

### 2. **Runnerï¼ˆè¿è¡Œå™¨ï¼‰**
Runner æ˜¯å®é™…æ‰§è¡Œä»»åŠ¡çš„è®¡ç®—ç¯å¢ƒã€‚

**ç±»å‹**:
- **GitHub-hosted Runners**: GitHub æä¾›çš„äº‘ç«¯è™šæ‹Ÿæœº
  - Ubuntu (Linux)
  - Windows
  - macOS
- **Self-hosted Runners**: ç”¨æˆ·è‡ªå·±éƒ¨ç½²çš„è¿è¡Œå™¨
  - å¯ä»¥åœ¨æœ¬åœ°æœåŠ¡å™¨ã€äº‘ä¸»æœºä¸Šè¿è¡Œ
  - æ›´å¤šæ§åˆ¶æƒï¼Œå¯ä»¥è®¿é—®å†…ç½‘èµ„æº

**Runner çš„æœ¬è´¨**:
```
Runner = è™šæ‹Ÿæœº + GitHub Actions Runner è½¯ä»¶
```

### 3. **Actionsï¼ˆå¯é‡ç”¨ç»„ä»¶ï¼‰**
Actions æ˜¯ç‹¬ç«‹çš„å¯é‡ç”¨ä»£ç å•å…ƒï¼Œæœ¬è´¨ä¸Šæ˜¯ï¼š
- **JavaScript Actions**: Node.js è„šæœ¬
- **Docker Actions**: Docker å®¹å™¨
- **Composite Actions**: ç»„åˆå¤šä¸ªæ­¥éª¤

---

## å·¥ä½œæµç¨‹

### å®Œæ•´æ‰§è¡Œæµç¨‹ï¼š

```
1. è§¦å‘äº‹ä»¶
   â†“
2. GitHub æ£€æµ‹åˆ°äº‹ä»¶ï¼ˆå¦‚ git pushï¼‰
   â†“
3. Workflow å¼•æ“è¯»å– .github/workflows/ ä¸‹çš„ YAML æ–‡ä»¶
   â†“
4. æ£€æŸ¥è§¦å‘æ¡ä»¶ï¼ˆon: push, branches ç­‰ï¼‰
   â†“
5. å¦‚æœåŒ¹é…ï¼Œåˆ›å»º Workflow Runï¼ˆå·¥ä½œæµè¿è¡Œå®ä¾‹ï¼‰
   â†“
6. è§£æ Jobsï¼Œç¡®å®šæ‰§è¡Œé¡ºåºï¼ˆå¹¶è¡Œ or ä¸²è¡Œï¼‰
   â†“
7. ä» Runner æ± ä¸­åˆ†é…å¯ç”¨çš„ Runner
   â†“
8. Runner æ‹‰å–ä»“åº“ä»£ç åˆ°è™šæ‹Ÿæœº
   â†“
9. æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ª Step
   â†“
10. æ”¶é›†æ—¥å¿—å’Œç»“æœ
   â†“
11. æ¸…ç†ç¯å¢ƒï¼Œé‡Šæ”¾ Runner
   â†“
12. æ˜¾ç¤ºæ‰§è¡Œç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
```

### è¯¦ç»†æ­¥éª¤è¯´æ˜

#### Step 1-6: äº‹ä»¶æ£€æµ‹
```javascript
// ä¼ªä»£ç ï¼šGitHub å†…éƒ¨äº‹ä»¶ç›‘å¬
github.on('push', async (event) => {
  const workflows = await loadWorkflows(event.repository);
  for (const workflow of workflows) {
    if (shouldTrigger(workflow, event)) {
      await createWorkflowRun(workflow, event);
    }
  }
});
```

#### Step 7: Runner åˆ†é…
```
Job é˜Ÿåˆ—: [Job1(ubuntu), Job2(windows), Job3(ubuntu)]
          â†“
Runner æ± : 
  - ubuntu-runner-1 [ç©ºé—²] â† åˆ†é…ç»™ Job1
  - ubuntu-runner-2 [ç©ºé—²] â† åˆ†é…ç»™ Job3
  - windows-runner-1 [ç©ºé—²] â† åˆ†é…ç»™ Job2
```

#### Step 8-9: ä»£ç æ‰§è¡Œ
æ¯ä¸ª Runner åœ¨ç‹¬ç«‹çš„è™šæ‹Ÿæœºä¸­ï¼š
```bash
# 1. åˆ›å»ºå·¥ä½œç›®å½•
mkdir /home/runner/work/repo-name

# 2. å…‹éš†ä»£ç ï¼ˆå¦‚æœä½¿ç”¨ actions/checkoutï¼‰
git clone https://github.com/user/repo.git

# 3. æ‰§è¡Œæ¯ä¸ª step
cd /home/runner/work/repo-name
npm install  # ç¤ºä¾‹å‘½ä»¤
npm test     # ç¤ºä¾‹å‘½ä»¤

# 4. æ¸…ç†
rm -rf /home/runner/work/repo-name
```

---

## Runner è¿è¡Œæœºåˆ¶

### Runner çš„ç”Ÿå‘½å‘¨æœŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Runner è™šæ‹Ÿæœº                      â”‚
â”‚                                             â”‚
â”‚  1. å¯åŠ¨é˜¶æ®µ                                 â”‚
â”‚     â€¢ åˆ›å»ºå…¨æ–°çš„è™šæ‹Ÿæœº                        â”‚
â”‚     â€¢ å®‰è£…é¢„ç½®è½¯ä»¶ï¼ˆgit, docker, etcï¼‰        â”‚
â”‚     â€¢ å¯åŠ¨ Runner Agent                      â”‚
â”‚                                              â”‚
â”‚  2. å‡†å¤‡é˜¶æ®µ                                 â”‚
â”‚     â€¢ è®¾ç½®ç¯å¢ƒå˜é‡                           â”‚
â”‚     â€¢ åˆ›å»ºå·¥ä½œç›®å½•                           â”‚
â”‚                                             â”‚
â”‚  3. æ‰§è¡Œé˜¶æ®µ                                 â”‚
â”‚     â€¢ è¿è¡Œæ¯ä¸ª step                          â”‚
â”‚     â€¢ å®æ—¶ä¸Šä¼ æ—¥å¿—åˆ° GitHub                  â”‚
â”‚     â€¢ æ•è·è¾“å‡ºå’Œé”™è¯¯                         â”‚
â”‚                                             â”‚
â”‚  4. æ¸…ç†é˜¶æ®µ                                 â”‚
â”‚     â€¢ åˆ é™¤å·¥ä½œç›®å½•                           â”‚
â”‚     â€¢ é”€æ¯è™šæ‹Ÿæœºï¼ˆGitHub-hostedï¼‰             â”‚
â”‚     â€¢ æˆ–å‡†å¤‡æ¥æ”¶ä¸‹ä¸€ä¸ª Jobï¼ˆSelf-hostedï¼‰     â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Runner Agent å·¥ä½œåŸç†

Runner Agent æ˜¯ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„è¿›ç¨‹ï¼š

```javascript
// ç®€åŒ–çš„ Runner Agent é€»è¾‘
class RunnerAgent {
  async start() {
    while (true) {
      // 1. è½®è¯¢ GitHub è·å–æ–°ä»»åŠ¡
      const job = await this.pollForJob();
      
      if (job) {
        // 2. æ‰§è¡Œä»»åŠ¡
        await this.executeJob(job);
        
        // 3. ä¸Šä¼ ç»“æœ
        await this.uploadResults(job);
      }
      
      // 4. ç­‰å¾…ä¸‹ä¸€æ¬¡è½®è¯¢
      await sleep(1000);
    }
  }
  
  async executeJob(job) {
    for (const step of job.steps) {
      const result = await this.runStep(step);
      await this.streamLogs(result.logs);
    }
  }
}
```

### éš”ç¦»æœºåˆ¶

æ¯ä¸ª Job éƒ½åœ¨**å…¨æ–°çš„ç¯å¢ƒ**ä¸­è¿è¡Œï¼š

```
Job 1 â†’ Runner VM 1 (Ubuntu 22.04) â†’ æ‰§è¡Œå®Œæ¯• â†’ é”€æ¯
Job 2 â†’ Runner VM 2 (Ubuntu 22.04) â†’ æ‰§è¡Œå®Œæ¯• â†’ é”€æ¯
Job 3 â†’ Runner VM 3 (Ubuntu 22.04) â†’ æ‰§è¡Œå®Œæ¯• â†’ é”€æ¯
```

**å¥½å¤„**:
- âœ… å®Œå…¨éš”ç¦»ï¼Œé¿å…ä»»åŠ¡é—´å¹²æ‰°
- âœ… å¹²å‡€çš„ç¯å¢ƒï¼Œå¯é‡å¤çš„æ„å»º
- âœ… å®‰å…¨ï¼Œæ¯æ¬¡éƒ½æ˜¯å…¨æ–°çš„ç³»ç»Ÿ

**ä»£ä»·**:
- â±ï¸ å¯åŠ¨æ—¶é—´ï¼ˆé€šå¸¸ 3-10 ç§’ï¼‰
- ğŸ’° èµ„æºæ¶ˆè€—

---

## äº‹ä»¶è§¦å‘æœºåˆ¶

### 1. Webhook è§¦å‘

å¤§å¤šæ•°äº‹ä»¶é€šè¿‡ GitHub Webhook è§¦å‘ï¼š

```
å¼€å‘è€…æ“ä½œ           GitHub æœåŠ¡å™¨                Actions å¼•æ“
    â”‚                     â”‚                          â”‚
    â”‚  git push           â”‚                          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                          â”‚
    â”‚                     â”‚  è§¦å‘ push webhook        â”‚
    â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚                     â”‚                          â”‚ è§£æ workflows
    â”‚                     â”‚                          â”‚ åˆ›å»º Workflow Run
    â”‚                     â”‚                          â”‚ åˆ†é… Runner
    â”‚                     â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
    â”‚                     â”‚     æ‰§è¡Œå®Œæˆé€šçŸ¥          â”‚
```

**æ”¯æŒçš„ Webhook äº‹ä»¶**:
- `push`: æ¨é€ä»£ç 
- `pull_request`: PR ç›¸å…³æ“ä½œ
- `issues`: Issue ç›¸å…³æ“ä½œ
- `release`: å‘å¸ƒç‰ˆæœ¬
- `fork`: ä»“åº“è¢« fork
- ç­‰ 30+ ç§äº‹ä»¶

### 2. å®šæ—¶è§¦å‘ (schedule)

ä½¿ç”¨ cron è¡¨è¾¾å¼ï¼š

```yaml
on:
  schedule:
    - cron: '0 0 * * *'  # æ¯å¤© UTC 0:00
```

**å®ç°åŸç†**:
```
GitHub å†…éƒ¨æœ‰ä¸€ä¸ª Cron è°ƒåº¦å™¨
    â†“
æ¯åˆ†é’Ÿæ‰«ææ‰€æœ‰ schedule é…ç½®
    â†“
å¦‚æœæ—¶é—´åŒ¹é…ï¼Œè§¦å‘å¯¹åº”çš„ Workflow
```

### 3. æ‰‹åŠ¨è§¦å‘ (workflow_dispatch)

```yaml
on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'éƒ¨ç½²ç¯å¢ƒ'
        required: true
        type: choice
        options:
          - dev
          - prod
```

**å®ç°**: GitHub UI æä¾›"Run workflow"æŒ‰é’®ï¼Œè°ƒç”¨ API è§¦å‘

### 4. API è§¦å‘ (repository_dispatch)

é€šè¿‡ GitHub API è¿œç¨‹è§¦å‘ï¼š

```bash
curl -X POST \
  -H "Accept: application/vnd.github+json" \
  -H "Authorization: token YOUR_TOKEN" \
  https://api.github.com/repos/owner/repo/dispatches \
  -d '{"event_type":"deploy"}'
```

---

## å®‰å…¨æœºåˆ¶

### 1. **Secrets åŠ å¯†å­˜å‚¨**

```
ç”¨æˆ·è®¾ç½® Secret â†’ åŠ å¯†å­˜å‚¨åœ¨ GitHub æ•°æ®åº“
                      â”‚
                      â–¼
    Workflow æ‰§è¡Œæ—¶ â†’ è§£å¯† â†’ æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ â†’ Runner ä½¿ç”¨
                      â”‚
                      â–¼
    æ—¥å¿—ä¸­è‡ªåŠ¨è„±æ• â†’ ****** ï¼ˆä¸ä¼šæ˜¾ç¤ºæ˜æ–‡ï¼‰
```

**åŠ å¯†æ–¹å¼**: 
- ä½¿ç”¨ AES-256-GCM åŠ å¯†
- æ¯ä¸ªä»“åº“æœ‰ç‹¬ç«‹çš„åŠ å¯†å¯†é’¥

### 2. **æƒé™æ§åˆ¶**

#### GITHUB_TOKEN
æ¯ä¸ª Workflow è‡ªåŠ¨è·å¾—ä¸€ä¸ªä¸´æ—¶ tokenï¼š

```yaml
steps:
  - name: ä½¿ç”¨ token
    run: |
      curl -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
        https://api.github.com/repos/${{ github.repository }}
```

**ç‰¹ç‚¹**:
- â±ï¸ è‡ªåŠ¨ç”Ÿæˆï¼ŒJob ç»“æŸåå¤±æ•ˆ
- ğŸ”’ é»˜è®¤åªæœ‰è¯»æƒé™
- ğŸ¯ å¯ä»¥é…ç½®æƒé™èŒƒå›´

```yaml
permissions:
  contents: read
  pull-requests: write
  issues: write
```

### 3. **Fork PR é™åˆ¶**

æ¥è‡ª Fork ä»“åº“çš„ PR é»˜è®¤ï¼š
- âŒ æ— æ³•è®¿é—® Secrets
- âŒ åªèƒ½ä½¿ç”¨åªè¯» token
- âœ… éœ€è¦ç»´æŠ¤è€…å®¡æ‰¹æ‰èƒ½è¿è¡Œ

### 4. **æ²™ç®±éš”ç¦»**

æ¯ä¸ª Job åœ¨ç‹¬ç«‹çš„è™šæ‹Ÿæœºä¸­è¿è¡Œï¼š
- ğŸ”’ æ–‡ä»¶ç³»ç»Ÿéš”ç¦»
- ğŸ”’ ç½‘ç»œéš”ç¦»ï¼ˆå¯é…ç½®ï¼‰
- ğŸ”’ è¿›ç¨‹éš”ç¦»

---

## ç¼“å­˜æœºåˆ¶

### 1. ä¾èµ–ç¼“å­˜åŸç†

```yaml
- uses: actions/setup-java@v4
  with:
    cache: maven  # è‡ªåŠ¨ç¼“å­˜ ~/.m2/repository
```

**åº•å±‚å®ç°**:
```
ç¬¬ä¸€æ¬¡è¿è¡Œ:
  1. è®¡ç®—ç¼“å­˜ key (åŸºäº pom.xml å“ˆå¸Œ)
  2. æ‰§è¡Œæ„å»ºï¼Œä¸‹è½½ä¾èµ–
  3. ä¸Šä¼  ~/.m2/repository åˆ° GitHub ç¼“å­˜æœåŠ¡å™¨
  4. å…³è” key å’Œç¼“å­˜æ–‡ä»¶

åç»­è¿è¡Œ:
  1. è®¡ç®—ç¼“å­˜ key
  2. ä»ç¼“å­˜æœåŠ¡å™¨ä¸‹è½½ï¼ˆå¦‚æœ key åŒ¹é…ï¼‰
  3. è§£å‹åˆ° ~/.m2/repository
  4. è·³è¿‡ä¾èµ–ä¸‹è½½ï¼Œç›´æ¥ä½¿ç”¨
```

### 2. ç¼“å­˜å­˜å‚¨

```
GitHub ç¼“å­˜æœåŠ¡
    â”‚
    â”œâ”€ repo1/
    â”‚   â”œâ”€ maven-linux-abc123 (ç¼“å­˜æ–‡ä»¶)
    â”‚   â”œâ”€ npm-linux-def456
    â”‚   â””â”€ docker-layers-ghi789
    â”‚
    â””â”€ repo2/
        â””â”€ ...
```

**é™åˆ¶**:
- ğŸ“¦ å•ä¸ªç¼“å­˜æœ€å¤§ 10GB
- ğŸ’¾ ä»“åº“æ€»ç¼“å­˜æœ€å¤§ 10GB
- â° ç¼“å­˜ 7 å¤©æœªä½¿ç”¨ä¼šè¢«åˆ é™¤

### 3. æ‰‹åŠ¨ç¼“å­˜

```yaml
- name: ç¼“å­˜ä¾èµ–
  uses: actions/cache@v4
  with:
    path: |
      ~/.m2/repository
      ~/.npm
    key: ${{ runner.os }}-deps-${{ hashFiles('**/pom.xml') }}
    restore-keys: |
      ${{ runner.os }}-deps-
```

**å·¥ä½œæµç¨‹**:
1. è®¡ç®— `key` çš„å€¼
2. æŸ¥æ‰¾ç²¾ç¡®åŒ¹é…çš„ç¼“å­˜
3. å¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨ `restore-keys` å‰ç¼€åŒ¹é…
4. Job ç»“æŸæ—¶ï¼Œå¦‚æœç¼“å­˜å˜åŒ–ï¼Œä¸Šä¼ æ–°ç¼“å­˜

---

## Artifactsï¼ˆæ„å»ºäº§ç‰©ï¼‰

### å­˜å‚¨æœºåˆ¶

```yaml
- uses: actions/upload-artifact@v4
  with:
    name: my-app
    path: dist/
```

**æµç¨‹**:
```
Runner æ‰§è¡Œä¸Šä¼ 
    â†“
å‹ç¼© dist/ ç›®å½•
    â†“
ä¸Šä¼ åˆ° GitHub Artifacts å­˜å‚¨ï¼ˆS3-likeï¼‰
    â†“
å…³è”åˆ° Workflow Run
    â†“
å…¶ä»– Job å¯ä»¥ä¸‹è½½
```

**ç‰¹ç‚¹**:
- ğŸ“ é»˜è®¤ä¿ç•™ 90 å¤©ï¼ˆå¯é…ç½® 1-90 å¤©ï¼‰
- ğŸ’¾ å…è´¹è´¦æˆ·æœ‰å­˜å‚¨é™åˆ¶
- ğŸ”— å¯ä»¥é€šè¿‡ GitHub UI æˆ– API ä¸‹è½½

---

## è®¡è´¹åŸç†

### GitHub-hosted Runners

**è®¡è´¹å•ä½**: åˆ†é’Ÿæ•°

| Runner ç±»å‹ | å…è´¹é¢åº¦/æœˆ | è¶…å‡ºä»·æ ¼        |
|-------------|-------------|----------------|
| Linux       | 2000 åˆ†é’Ÿ   | $0.008/åˆ†é’Ÿ    |
| Windows     | 2000 åˆ†é’Ÿ   | $0.016/åˆ†é’Ÿ    |
| macOS       | 2000 åˆ†é’Ÿ   | $0.08/åˆ†é’Ÿ     |

**è®¡ç®—ç¤ºä¾‹**:
```
Job è¿è¡Œ 5 åˆ†é’Ÿ (Ubuntu) = æ¶ˆè€— 5 åˆ†é’Ÿé¢åº¦
Job è¿è¡Œ 5 åˆ†é’Ÿ (macOS)  = æ¶ˆè€— 50 åˆ†é’Ÿé¢åº¦ï¼ˆ10x å€ç‡ï¼‰
```

### Self-hosted Runners

- âœ… å®Œå…¨å…è´¹ï¼ˆè‡ªå·±æ‰¿æ‹…ç¡¬ä»¶æˆæœ¬ï¼‰
- ğŸš€ å¯ä»¥æ›´å¿«ï¼ˆè®¿é—®å†…ç½‘èµ„æºï¼‰
- ğŸ”§ éœ€è¦è‡ªå·±ç»´æŠ¤

---

## æ€§èƒ½ä¼˜åŒ–åŸç†

### 1. å¹¶è¡Œæ‰§è¡Œ

```yaml
jobs:
  build-backend:   # å¹¶è¡Œæ‰§è¡Œ
    runs-on: ubuntu-latest
    
  build-frontend:  # å¹¶è¡Œæ‰§è¡Œ
    runs-on: ubuntu-latest
```

**å®ç°**:
- æ¯ä¸ª Job åˆ†é…åˆ°ä¸åŒçš„ Runner
- åŒæ—¶æ‰§è¡Œï¼Œç¼©çŸ­æ€»æ—¶é—´

### 2. çŸ©é˜µç­–ç•¥

```yaml
strategy:
  matrix:
    os: [ubuntu, windows, macos]
    java: [11, 17, 21]
# ç”Ÿæˆ 3 Ã— 3 = 9 ä¸ªå¹¶è¡Œ Job
```

### 3. æ¡ä»¶è·³è¿‡

```yaml
- name: ä»…åœ¨ main åˆ†æ”¯æ„å»º
  if: github.ref == 'refs/heads/main'
  run: npm run build
```

**åŸç†**: å¼•æ“åœ¨åˆ†é… Runner å‰å…ˆè¯„ä¼°æ¡ä»¶ï¼Œä¸æ»¡è¶³ç›´æ¥è·³è¿‡

---

## æ€»ç»“

GitHub Actions çš„æ ¸å¿ƒåŸç†ï¼š

1. **äº‹ä»¶é©±åŠ¨**: Webhook/Schedule/API è§¦å‘
2. **åˆ†å¸ƒå¼æ‰§è¡Œ**: Workflow å¼•æ“è°ƒåº¦ï¼ŒRunner æ± æ‰§è¡Œ
3. **éš”ç¦»å®‰å…¨**: æ¯ä¸ª Job ç‹¬ç«‹ VMï¼Œå®Œå…¨éš”ç¦»
4. **å¯æ‰©å±•**: Actions Marketplace æä¾›ä¸°å¯Œçš„å¯é‡ç”¨ç»„ä»¶
5. **ç¼“å­˜åŠ é€Ÿ**: æ™ºèƒ½ç¼“å­˜ä¾èµ–å’Œæ„å»ºäº§ç‰©
6. **çµæ´»è®¡è´¹**: äº‘ç«¯æŒ‰åˆ†é’Ÿè®¡è´¹ï¼Œè‡ªæ‰˜ç®¡å…è´¹

ç†è§£è¿™äº›åŸç†å¯ä»¥å¸®åŠ©ä½ ï¼š
- ğŸ¯ æ›´å¥½åœ°è®¾è®¡ Workflow
- âš¡ ä¼˜åŒ–æ‰§è¡Œé€Ÿåº¦
- ğŸ”’ æå‡å®‰å…¨æ€§
- ğŸ’° é™ä½æˆæœ¬

---

## æ‰©å±•é˜…è¯»

- [GitHub Actions æ¶æ„æ–‡æ¡£](https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions)
- [Self-hosted Runner æ¶æ„](https://docs.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners)
- [Actions Runner æºç ](https://github.com/actions/runner)

